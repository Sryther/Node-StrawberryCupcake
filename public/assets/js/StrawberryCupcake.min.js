/*! StrawberryCupcake 2015-03-03 */
var app=angular.module("StrawberryCupcake",["ui.router","ui.bootstrap","ngCookies","ngResource"]);app.controller("UsersController",["$scope","$rootScope","ResourceService",function(a,b,c){var d=c.Conversation;a.conversation=[],a.currentConversation={},a.getAll=function(){b.toggleLoading(),a.conversation=d.all(null,function(c){a.conversation=c,b.toggleLoading()},function(a){b.toggleLoading(),b.setError(a.message)})},a.get=function(c){d.get({id:c},function(b){a.currentConversation=b},function(a){b.setError(a.message)})}}]),app.controller("ErrorsController",["$scope","$rootScope",function(a,b){a.error=!1,a.success=!1,a.loading=!1,a.messageError="",a.messageSuccess="",b.toggleLoading=function(){a.loading=!a.loading},b.setError=function(b){a.messageError=b,a.error=!0},b.unsetError=function(){a.messageError="",a.error=!1},b.setSuccess=function(b){a.messageSuccess=b,a.success=!0},b.unsetSuccess=function(){a.messageSuccess="",a.success=!1}}]),app.controller("TableController",["$scope",function(a){a.orderByField="firstName",a.reverseSort=!1}]),app.controller("UsersController",["$scope","$rootScope","ResourceService",function(a,b,c){var d=c.User;a.users=[],a.currentUser={},a.numPerPage=20,a.filteredUsers=[],a.currentPage=1,a.getAll=function(){b.toggleLoading(),d.all(null,function(c){a.users=c,b.toggleLoading()},function(a){b.toggleLoading(),b.setError(a.message)})},a.get=function(c){d.get({id:c},function(b){a.currentUser=b},function(a){b.setError(a.message)})},a.numPages=function(){return Math.ceil(a.users.length/a.numPerPage)},a.pageChanged=function(){var b=(a.currentPage-1)*a.numPerPage,c=b+a.numPerPage;a.filteredUsers=a.users.slice(b,c)},a.$watch("users",function(){a.users.length>0&&a.pageChanged()})}]),app.factory("AuthService",["$http","$window",function(a,b){return{login:function(b){return a.post("/api/sessions",b)},logout:function(){b.sessionStorage.token=!1},isLoggedIn:function(){return"undefined"!==b.sessionStorage.token?!0:!1},getPermissions:function(){}}}]),app.factory("ResourceService",["$resource",function(a){var b={update:{method:"PUT"},all:{method:"GET",isArray:!0}},c={id:"@id"};return{User:a("/api/users/:id",c,b),Conversation:a("/api/conversations/:id",c,b)}}]),app.config(function(a,b){b.otherwise("/404"),a.state("404",{url:"/404",templateUrl:"/ng/errors/404.html"}).state("dashboard",{url:"",templateUrl:"/ng/dashboard/home.html"}).state("users",{url:"/users",templateUrl:"/ng/users/all.html"}).state("users.get",{url:"/:username",templateUrl:"/ng/users/get.html"}).state("conversations",{url:"/conversations",templateUrl:"/ng/conversations/all.html"}).state("conversations.get",{url:"/:username",templateUrl:"/ng/conversations/get.html"})});